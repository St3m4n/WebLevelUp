[{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\components\\FeaturedOffers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\components\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\components\\RecommendationsGrid.tsx","messages":[{"ruleId":"prettier/prettier","severity":1,"message":"Replace `·src={producto.url}·alt={producto.nombre}·loading=\"lazy\"` with `␍⏎····················src={producto.url}␍⏎····················alt={producto.nombre}␍⏎····················loading=\"lazy\"␍⏎·················`","line":34,"column":23,"nodeType":null,"messageId":"replace","endLine":34,"endColumn":79,"fix":{"range":[1242,1298],"text":"\r\n                    src={producto.url}\r\n                    alt={producto.nombre}\r\n                    loading=\"lazy\"\r\n                 "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { Link } from 'react-router-dom';\r\nimport { useProducts } from '@/hooks/useProducts';\r\nimport { formatPrice } from '@/utils/format';\r\nimport { usePricing } from '@/hooks/usePricing';\r\nimport styles from './RecommendationsGrid.module.css';\r\n\r\nconst RecommendationsGrid: React.FC = () => {\r\n  const productos = useProducts();\r\n  const { getPriceBreakdown, discountRate } = usePricing();\r\n  const recomendados = productos\r\n    .filter((producto) => !producto.deletedAt && producto.stock > 0)\r\n    .slice(0, 4);\r\n\r\n  if (recomendados.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <section className={styles.section}>\r\n      <div className=\"container\">\r\n        <header className={styles.header}>\r\n          <h2 className={styles.title}>Te recomendamos</h2>\r\n          <p className={styles.subtitle}>\r\n            Selección curada según tendencias de la comunidad Level-Up.\r\n          </p>\r\n        </header>\r\n\r\n        <div className={styles.grid}>\r\n          {recomendados.map((producto) => {\r\n            const pricing = getPriceBreakdown(producto.precio);\r\n            return (\r\n              <article className={styles.card} key={producto.codigo}>\r\n                <div className={styles.imageWrap}>\r\n                  <img src={producto.url} alt={producto.nombre} loading=\"lazy\" />\r\n                </div>\r\n\r\n                <div className={styles.body}>\r\n                  <h3 className={styles.productName}>{producto.nombre}</h3>\r\n                  <p className={styles.productDescription}>\r\n                    {producto.descripcion}\r\n                  </p>\r\n\r\n                  <div className={styles.meta}>\r\n                    {pricing.hasDiscount ? (\r\n                      <span className={styles.priceWithDiscount}>\r\n                        <span className={styles.priceOriginal}>\r\n                          {formatPrice(pricing.basePrice)}\r\n                        </span>\r\n                        <span className={styles.priceFinal}>\r\n                          {formatPrice(pricing.finalPrice)}\r\n                        </span>\r\n                        <span className={styles.discountBadge}>\r\n                          −{Math.round(discountRate * 100)}% DUOC\r\n                        </span>\r\n                      </span>\r\n                    ) : (\r\n                      <span className={styles.priceFinal}>\r\n                        {formatPrice(pricing.finalPrice)}\r\n                      </span>\r\n                    )}\r\n                    <Link\r\n                      to={`/tienda/${producto.codigo}`}\r\n                      className={styles.action}\r\n                    >\r\n                      Ver detalle →\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </article>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default RecommendationsGrid;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\components\\SecondaryNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\context\\AuthContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\context\\CartContext.tsx","messages":[{"ruleId":"prettier/prettier","severity":1,"message":"Insert `␍⏎·····`","line":275,"column":10,"nodeType":null,"messageId":"insert","endLine":275,"endColumn":10,"fix":{"range":[7793,7793],"text":"\r\n     "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import {\r\n  createContext,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useReducer,\r\n} from 'react';\r\nimport type { Producto } from '@/types';\r\nimport type { ProductRecord } from '@/utils/products';\r\nimport { loadProducts, subscribeToProducts } from '@/utils/products';\r\nimport { usePricing, type PriceBreakdown } from '@/hooks/usePricing';\r\n\r\nexport type CartItem = {\r\n  id: string;\r\n  nombre: string;\r\n  precio: number;\r\n  cantidad: number;\r\n  imagen: string;\r\n  stock: number;\r\n};\r\n\r\ntype CartState = {\r\n  items: CartItem[];\r\n};\r\n\r\nexport type CartItemPricing = {\r\n  unitBase: number;\r\n  unitFinal: number;\r\n  subtotalBase: number;\r\n  subtotalFinal: number;\r\n  savingsUnit: number;\r\n  savingsSubtotal: number;\r\n  hasDiscount: boolean;\r\n  discountRate: number;\r\n};\r\n\r\ntype CartAction =\r\n  | { type: 'ADD_ITEM'; payload: Producto; cantidad?: number }\r\n  | { type: 'REMOVE_ITEM'; payload: { id: string } }\r\n  | { type: 'UPDATE_QUANTITY'; payload: { id: string; cantidad: number } }\r\n  | { type: 'CLEAR_CART' }\r\n  | { type: 'SYNC_PRODUCTS'; payload: ProductRecord[] };\r\n\r\ntype CartContextValue = {\r\n  items: CartItem[];\r\n  totalCantidad: number;\r\n  subtotal: number;\r\n  total: number;\r\n  totalSavings: number;\r\n  hasDuocDiscount: boolean;\r\n  discountRate: number;\r\n  getItemPricing: (item: CartItem) => CartItemPricing;\r\n  addItem: (producto: Producto, cantidad?: number) => void;\r\n  removeItem: (id: string) => void;\r\n  updateCantidad: (id: string, cantidad: number) => void;\r\n  clearCart: () => void;\r\n};\r\n\r\nconst CART_STORAGE_KEY = 'levelup-cart';\r\n\r\nconst CartContext = createContext<CartContextValue | undefined>(undefined);\r\n\r\nconst cartReducer = (state: CartState, action: CartAction): CartState => {\r\n  switch (action.type) {\r\n    case 'ADD_ITEM': {\r\n      const cantidad = action.cantidad ?? 1;\r\n      const existing = state.items.find(\r\n        (item) => item.id === action.payload.codigo\r\n      );\r\n      if (existing) {\r\n        return {\r\n          items: state.items.map((item) =>\r\n            item.id === existing.id\r\n              ? {\r\n                  ...item,\r\n                  cantidad: Math.min(\r\n                    item.cantidad + cantidad,\r\n                    action.payload.stock\r\n                  ),\r\n                  stock: action.payload.stock,\r\n                }\r\n              : item\r\n          ),\r\n        };\r\n      }\r\n      return {\r\n        items: [\r\n          ...state.items,\r\n          {\r\n            id: action.payload.codigo,\r\n            nombre: action.payload.nombre,\r\n            precio: action.payload.precio,\r\n            cantidad: Math.min(cantidad, action.payload.stock),\r\n            imagen: action.payload.url,\r\n            stock: action.payload.stock,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n    case 'REMOVE_ITEM': {\r\n      return {\r\n        items: state.items.filter((item) => item.id !== action.payload.id),\r\n      };\r\n    }\r\n    case 'UPDATE_QUANTITY': {\r\n      return {\r\n        items: state.items.map((item) => {\r\n          if (item.id !== action.payload.id) {\r\n            return item;\r\n          }\r\n          const maxCantidad = item.stock || 1;\r\n          const nextCantidad = Math.min(\r\n            Math.max(1, action.payload.cantidad),\r\n            maxCantidad\r\n          );\r\n          return { ...item, cantidad: nextCantidad };\r\n        }),\r\n      };\r\n    }\r\n    case 'CLEAR_CART':\r\n      return { items: [] };\r\n    case 'SYNC_PRODUCTS': {\r\n      const productMap = new Map(\r\n        action.payload.map((product) => [product.codigo, product])\r\n      );\r\n\r\n      const syncItems = state.items\r\n        .map((item) => {\r\n          const product = productMap.get(item.id);\r\n          if (!product || product.deletedAt || product.stock <= 0) {\r\n            return undefined;\r\n          }\r\n          const cantidad = Math.min(item.cantidad, product.stock);\r\n          if (cantidad <= 0) {\r\n            return undefined;\r\n          }\r\n          return {\r\n            ...item,\r\n            nombre: product.nombre,\r\n            precio: product.precio,\r\n            imagen: product.url,\r\n            stock: product.stock,\r\n            cantidad,\r\n          } satisfies CartItem;\r\n        })\r\n        .filter(Boolean) as CartItem[];\r\n\r\n      if (syncItems.length === state.items.length) {\r\n        let unchanged = true;\r\n        for (let index = 0; index < syncItems.length; index += 1) {\r\n          const prev = state.items[index];\r\n          const next = syncItems[index];\r\n          if (\r\n            prev.id !== next.id ||\r\n            prev.cantidad !== next.cantidad ||\r\n            prev.precio !== next.precio ||\r\n            prev.stock !== next.stock ||\r\n            prev.nombre !== next.nombre ||\r\n            prev.imagen !== next.imagen\r\n          ) {\r\n            unchanged = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (unchanged) {\r\n          return state;\r\n        }\r\n      }\r\n\r\n      return { items: syncItems };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst loadInitialState = (): CartState => {\r\n  const raw = localStorage.getItem(CART_STORAGE_KEY);\r\n  if (!raw) return { items: [] };\r\n  try {\r\n    const parsed = JSON.parse(raw) as { items?: Partial<CartItem>[] };\r\n    if (!parsed.items) {\r\n      return { items: [] };\r\n    }\r\n\r\n    const productosActuales = loadProducts();\r\n    const productMap = new Map(\r\n      productosActuales.map((producto) => [producto.codigo, producto])\r\n    );\r\n\r\n    const sanitizedItems: CartItem[] = parsed.items\r\n      .map((stored) => {\r\n        if (!stored?.id) return undefined;\r\n        const producto = productMap.get(stored.id);\r\n        const stock = producto?.stock ?? stored.stock ?? 0;\r\n        if (stock <= 0) {\r\n          return undefined;\r\n        }\r\n        const nombre = producto?.nombre ?? stored.nombre ?? 'Producto';\r\n        const precio = producto?.precio ?? stored.precio ?? 0;\r\n        const imagen = producto?.url ?? stored.imagen ?? '';\r\n        const cantidad = Math.min(Math.max(1, stored.cantidad ?? 1), stock);\r\n\r\n        return {\r\n          id: stored.id,\r\n          nombre,\r\n          precio,\r\n          cantidad,\r\n          imagen,\r\n          stock,\r\n        } satisfies CartItem;\r\n      })\r\n      .filter(Boolean) as CartItem[];\r\n\r\n    return { items: sanitizedItems };\r\n  } catch (error) {\r\n    console.warn('Error al parsear el carrito, limpiando', error);\r\n    localStorage.removeItem(CART_STORAGE_KEY);\r\n    return { items: [] };\r\n  }\r\n};\r\n\r\nexport const CartProvider: React.FC<{ children: React.ReactNode }> = ({\r\n  children,\r\n}) => {\r\n  const [state, dispatch] = useReducer(\r\n    cartReducer,\r\n    undefined,\r\n    loadInitialState\r\n  );\r\n  const { hasDuocDiscount, discountRate, applyDiscount, getPriceBreakdown } =\r\n    usePricing();\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(state));\r\n  }, [state]);\r\n\r\n  useEffect(() => {\r\n    const sync = () => {\r\n      dispatch({ type: 'SYNC_PRODUCTS', payload: loadProducts() });\r\n    };\r\n\r\n    sync();\r\n    const unsubscribe = subscribeToProducts(sync);\r\n\r\n    return () => {\r\n      unsubscribe?.();\r\n    };\r\n  }, []);\r\n\r\n  const addItem = useCallback((producto: Producto, cantidad?: number) => {\r\n    dispatch({ type: 'ADD_ITEM', payload: producto, cantidad });\r\n  }, []);\r\n\r\n  const removeItem = useCallback((id: string) => {\r\n    dispatch({ type: 'REMOVE_ITEM', payload: { id } });\r\n  }, []);\r\n\r\n  const updateCantidad = useCallback((id: string, cantidad: number) => {\r\n    dispatch({ type: 'UPDATE_QUANTITY', payload: { id, cantidad } });\r\n  }, []);\r\n\r\n  const clearCart = useCallback(() => {\r\n    dispatch({ type: 'CLEAR_CART' });\r\n  }, []);\r\n\r\n  const totalCantidad = useMemo(\r\n    () => state.items.reduce((sum, item) => sum + item.cantidad, 0),\r\n    [state.items]\r\n  );\r\n\r\n  const subtotal = useMemo(\r\n    () => state.items.reduce((sum, item) => sum + item.cantidad * item.precio, 0),\r\n    [state.items]\r\n  );\r\n\r\n  const total = useMemo(\r\n    () =>\r\n      state.items.reduce(\r\n        (sum, item) => sum + item.cantidad * applyDiscount(item.precio),\r\n        0\r\n      ),\r\n    [applyDiscount, state.items]\r\n  );\r\n\r\n  const totalSavings = useMemo(\r\n    () => Math.max(0, subtotal - total),\r\n    [subtotal, total]\r\n  );\r\n\r\n  const getItemPricing = useCallback(\r\n    (item: CartItem): CartItemPricing => {\r\n      const breakdown: PriceBreakdown = getPriceBreakdown(item.precio);\r\n      const subtotalBase = breakdown.basePrice * item.cantidad;\r\n      const subtotalFinal = breakdown.finalPrice * item.cantidad;\r\n      const savingsSubtotal = Math.max(0, subtotalBase - subtotalFinal);\r\n      return {\r\n        unitBase: breakdown.basePrice,\r\n        unitFinal: breakdown.finalPrice,\r\n        subtotalBase,\r\n        subtotalFinal,\r\n        savingsUnit: breakdown.savings,\r\n        savingsSubtotal,\r\n        hasDiscount: breakdown.hasDiscount,\r\n        discountRate: breakdown.discountRate,\r\n      };\r\n    },\r\n    [getPriceBreakdown]\r\n  );\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      items: state.items,\r\n      totalCantidad,\r\n      subtotal,\r\n      total,\r\n      totalSavings,\r\n      hasDuocDiscount,\r\n      discountRate,\r\n      getItemPricing,\r\n      addItem,\r\n      removeItem,\r\n      updateCantidad,\r\n      clearCart,\r\n    }),\r\n    [\r\n      state.items,\r\n      totalCantidad,\r\n      subtotal,\r\n      total,\r\n      totalSavings,\r\n      hasDuocDiscount,\r\n      discountRate,\r\n      getItemPricing,\r\n      addItem,\r\n      removeItem,\r\n      updateCantidad,\r\n      clearCart,\r\n    ]\r\n  );\r\n\r\n  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;\r\n};\r\n\r\nexport const useCart = (): CartContextValue => {\r\n  const ctx = useContext(CartContext);\r\n  if (!ctx) {\r\n    throw new Error('useCart debe usarse dentro de CartProvider');\r\n  }\r\n  return ctx;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\data\\productos.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\data\\regionesComunas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\data\\usuarios.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\hooks\\useActiveSection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\hooks\\usePricing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\hooks\\useProducts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\Carrito.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\Checkout.tsx","messages":[{"ruleId":"prettier/prettier","severity":1,"message":"Replace `␍⏎························?·styles.priceOriginal␍⏎·······················` with `·?·styles.priceOriginal`","line":481,"column":38,"nodeType":null,"messageId":"replace","endLine":483,"endColumn":24,"fix":{"range":[17248,17321],"text":" ? styles.priceOriginal"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import {\r\n  type ChangeEvent,\r\n  type FormEvent,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useCart } from '@/context/CartContext';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { regiones } from '@/data/regionesComunas';\r\nimport { formatPrice } from '@/utils/format';\r\nimport { addOrder } from '@/utils/orders';\r\nimport styles from './Checkout.module.css';\r\n\r\ntype PagoMetodo = 'tarjeta' | 'transferencia';\r\ntype CheckoutForm = {\r\n  nombre: string;\r\n  correo: string;\r\n  direccion: string;\r\n  region: string;\r\n  comuna: string;\r\n  metodo: PagoMetodo;\r\n  tarjeta: string;\r\n  expiracion: string;\r\n  cvv: string;\r\n};\r\n\r\ntype FormErrors = Partial<Record<keyof CheckoutForm, string>>;\r\n\r\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\ntype AuthUserValue = ReturnType<typeof useAuth>['user'];\r\n\r\nconst buildInitialForm = (usuario: AuthUserValue): CheckoutForm => ({\r\n  nombre: usuario ? `${usuario.nombre} ${usuario.apellidos}`.trim() : '',\r\n  correo: usuario?.correo ?? '',\r\n  direccion: usuario?.direccion ?? '',\r\n  region: usuario?.region ?? '',\r\n  comuna: usuario?.comuna ?? '',\r\n  metodo: 'tarjeta',\r\n  tarjeta: '',\r\n  expiracion: '',\r\n  cvv: '',\r\n});\r\n\r\nconst Checkout: React.FC = () => {\r\n  const {\r\n    items,\r\n    subtotal,\r\n    total,\r\n    totalSavings,\r\n    hasDuocDiscount,\r\n    getItemPricing,\r\n    clearCart,\r\n  } = useCart();\r\n  const { user } = useAuth();\r\n  const [form, setForm] = useState<CheckoutForm>(() => buildInitialForm(user));\r\n  const [errors, setErrors] = useState<FormErrors>({});\r\n  const [status, setStatus] = useState<{\r\n    type: 'success' | 'error';\r\n    message: string;\r\n  }>();\r\n\r\n  useEffect(() => {\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      nombre: user ? `${user.nombre} ${user.apellidos}`.trim() : '',\r\n      correo: user?.correo ?? '',\r\n      direccion: user?.direccion ?? '',\r\n      region: user?.region ?? '',\r\n      comuna: user?.comuna ?? '',\r\n    }));\r\n  }, [user]);\r\n\r\n  const comunasDisponibles = useMemo(() => {\r\n    const regionSeleccionada = regiones.find(\r\n      (region) => region.nombre === form.region\r\n    );\r\n    return regionSeleccionada?.comunas ?? [];\r\n  }, [form.region]);\r\n\r\n  const cartEstaVacio = items.length === 0;\r\n\r\n  const handleFieldChange =\r\n    (field: keyof CheckoutForm) =>\r\n    (event: ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n      const value = event.target.value;\r\n      setForm((prev) => {\r\n        if (field === 'region') {\r\n          return {\r\n            ...prev,\r\n            region: value,\r\n            comuna: '',\r\n          } as CheckoutForm;\r\n        }\r\n        if (field === 'metodo') {\r\n          const metodo = value as PagoMetodo;\r\n          return {\r\n            ...prev,\r\n            metodo,\r\n            tarjeta: metodo === 'tarjeta' ? prev.tarjeta : '',\r\n            expiracion: metodo === 'tarjeta' ? prev.expiracion : '',\r\n            cvv: metodo === 'tarjeta' ? prev.cvv : '',\r\n          } as CheckoutForm;\r\n        }\r\n        return {\r\n          ...prev,\r\n          [field]: value,\r\n        } as CheckoutForm;\r\n      });\r\n      setErrors((prev) => {\r\n        if (!prev[field]) return prev;\r\n        const next = { ...prev };\r\n        delete next[field];\r\n        if (field === 'region') {\r\n          delete next.comuna;\r\n        }\r\n        return next;\r\n      });\r\n      setStatus(undefined);\r\n    };\r\n\r\n  const validateForm = (): FormErrors => {\r\n    const validationErrors: FormErrors = {};\r\n    if (!form.nombre.trim()) {\r\n      validationErrors.nombre = 'Ingresa tu nombre completo.';\r\n    }\r\n    if (!form.correo.trim() || !emailRegex.test(form.correo)) {\r\n      validationErrors.correo = 'Ingresa un correo válido.';\r\n    }\r\n    if (!form.direccion.trim()) {\r\n      validationErrors.direccion = 'Indica una dirección de entrega.';\r\n    }\r\n    if (!form.region) {\r\n      validationErrors.region = 'Selecciona una región.';\r\n    }\r\n    if (!form.comuna) {\r\n      validationErrors.comuna = 'Selecciona una comuna.';\r\n    }\r\n    if (form.metodo === 'tarjeta') {\r\n      const tarjetaLimpia = form.tarjeta.replace(/\\s+/g, '');\r\n      if (!/^[0-9]{16}$/.test(tarjetaLimpia)) {\r\n        validationErrors.tarjeta = 'La tarjeta debe tener 16 dígitos.';\r\n      }\r\n      if (!/^\\d{2}\\/\\d{2}$/.test(form.expiracion)) {\r\n        validationErrors.expiracion = 'Usa el formato MM/AA.';\r\n      }\r\n      if (!/^\\d{3,4}$/.test(form.cvv)) {\r\n        validationErrors.cvv = 'CVV inválido.';\r\n      }\r\n    }\r\n    return validationErrors;\r\n  };\r\n\r\n  const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    if (cartEstaVacio) {\r\n      setStatus({\r\n        type: 'error',\r\n        message: 'Tu carrito está vacío, agrega productos antes de pagar.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    const validationErrors = validateForm();\r\n    setErrors(validationErrors);\r\n    if (Object.keys(validationErrors).length > 0) {\r\n      setStatus({\r\n        type: 'error',\r\n        message: 'Revisa los campos destacados antes de confirmar.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    const orderId = `ORD-${Date.now()}`;\r\n    const paymentStatus =\r\n      form.metodo === 'transferencia' ? 'Pendiente' : 'Pagado';\r\n\r\n    addOrder({\r\n      id: orderId,\r\n      userEmail: form.correo.trim().toLowerCase(),\r\n      userName: form.nombre.trim(),\r\n      total,\r\n      createdAt: new Date().toISOString(),\r\n      items: items.map((item) => {\r\n        const pricing = getItemPricing(item);\r\n        return {\r\n          codigo: item.id,\r\n          nombre: item.nombre,\r\n          cantidad: item.cantidad,\r\n          precioUnitario: pricing.unitFinal,\r\n          subtotal: pricing.subtotalFinal,\r\n        };\r\n      }),\r\n      paymentMethod: form.metodo,\r\n      direccion: form.direccion.trim(),\r\n      region: form.region,\r\n      comuna: form.comuna,\r\n      status: paymentStatus,\r\n    });\r\n\r\n    clearCart();\r\n    setStatus({\r\n      type: 'success',\r\n      message:\r\n        form.metodo === 'transferencia'\r\n          ? `Pedido ${orderId} registrado. Recuerda enviar el comprobante a pagos@levelup.cl.`\r\n          : `Pedido ${orderId} confirmado. Te enviaremos un correo con los detalles en unos instantes.`,\r\n    });\r\n    setErrors({});\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      tarjeta: '',\r\n      expiracion: '',\r\n      cvv: '',\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className={styles.page}>\r\n        <header className={styles.header}>\r\n          <h1>Checkout seguro</h1>\r\n          <p>\r\n            Revisa tus datos y confirma el pedido. Aceptamos tarjetas y\r\n            transferencias.\r\n          </p>\r\n        </header>\r\n\r\n        <div className={styles.layout}>\r\n          <section className={styles.formSection}>\r\n            <form onSubmit={handleSubmit} className={styles.form}>\r\n              {status && (\r\n                <div\r\n                  role=\"status\"\r\n                  aria-live=\"polite\"\r\n                  className={\r\n                    status.type === 'success'\r\n                      ? styles.statusSuccess\r\n                      : styles.statusError\r\n                  }\r\n                >\r\n                  {status.message}\r\n                </div>\r\n              )}\r\n              <fieldset className={styles.fieldset}>\r\n                <legend>Datos de entrega</legend>\r\n                <div className={styles.fieldGroup}>\r\n                  <label htmlFor=\"nombre\">Nombre completo</label>\r\n                  <input\r\n                    id=\"nombre\"\r\n                    value={form.nombre}\r\n                    onChange={handleFieldChange('nombre')}\r\n                    className={errors.nombre ? styles.inputError : undefined}\r\n                  />\r\n                  {errors.nombre && (\r\n                    <span className={styles.errorMessage}>{errors.nombre}</span>\r\n                  )}\r\n                </div>\r\n                <div className={styles.fieldGroup}>\r\n                  <label htmlFor=\"correo\">Correo</label>\r\n                  <input\r\n                    id=\"correo\"\r\n                    type=\"email\"\r\n                    value={form.correo}\r\n                    onChange={handleFieldChange('correo')}\r\n                    className={errors.correo ? styles.inputError : undefined}\r\n                  />\r\n                  {errors.correo && (\r\n                    <span className={styles.errorMessage}>{errors.correo}</span>\r\n                  )}\r\n                </div>\r\n                <div className={styles.fieldGroup}>\r\n                  <label htmlFor=\"direccion\">Dirección</label>\r\n                  <input\r\n                    id=\"direccion\"\r\n                    value={form.direccion}\r\n                    onChange={handleFieldChange('direccion')}\r\n                    className={errors.direccion ? styles.inputError : undefined}\r\n                  />\r\n                  {errors.direccion && (\r\n                    <span className={styles.errorMessage}>\r\n                      {errors.direccion}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <div className={styles.fieldRow}>\r\n                  <div className={styles.fieldGroup}>\r\n                    <label htmlFor=\"region\">Región</label>\r\n                    <select\r\n                      id=\"region\"\r\n                      value={form.region}\r\n                      onChange={handleFieldChange('region')}\r\n                      className={errors.region ? styles.inputError : undefined}\r\n                    >\r\n                      <option value=\"\" disabled>\r\n                        Selecciona una región\r\n                      </option>\r\n                      {regiones.map((region) => (\r\n                        <option key={region.nombre} value={region.nombre}>\r\n                          {region.nombre}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                    {errors.region && (\r\n                      <span className={styles.errorMessage}>\r\n                        {errors.region}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <div className={styles.fieldGroup}>\r\n                    <label htmlFor=\"comuna\">Comuna</label>\r\n                    <select\r\n                      id=\"comuna\"\r\n                      value={form.comuna}\r\n                      onChange={handleFieldChange('comuna')}\r\n                      disabled={comunasDisponibles.length === 0}\r\n                      className={errors.comuna ? styles.inputError : undefined}\r\n                    >\r\n                      <option value=\"\" disabled>\r\n                        {form.region\r\n                          ? 'Selecciona una comuna'\r\n                          : 'Selecciona una región primero'}\r\n                      </option>\r\n                      {comunasDisponibles.map((comuna) => (\r\n                        <option key={comuna.nombre} value={comuna.nombre}>\r\n                          {comuna.nombre}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                    {errors.comuna && (\r\n                      <span className={styles.errorMessage}>\r\n                        {errors.comuna}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </fieldset>\r\n\r\n              <fieldset className={styles.fieldset}>\r\n                <legend>Método de pago</legend>\r\n                <div className={styles.fieldGroup}>\r\n                  <label className={styles.radioOption}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"metodo\"\r\n                      value=\"tarjeta\"\r\n                      checked={form.metodo === 'tarjeta'}\r\n                      onChange={handleFieldChange('metodo')}\r\n                    />\r\n                    Tarjeta de crédito / débito\r\n                  </label>\r\n                  <label className={styles.radioOption}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"metodo\"\r\n                      value=\"transferencia\"\r\n                      checked={form.metodo === 'transferencia'}\r\n                      onChange={handleFieldChange('metodo')}\r\n                    />\r\n                    Transferencia bancaria\r\n                  </label>\r\n                </div>\r\n\r\n                {form.metodo === 'tarjeta' ? (\r\n                  <div className={styles.fieldRow}>\r\n                    <div className={styles.fieldGroup}>\r\n                      <label htmlFor=\"tarjeta\">Número de tarjeta</label>\r\n                      <input\r\n                        id=\"tarjeta\"\r\n                        inputMode=\"numeric\"\r\n                        placeholder=\"XXXX XXXX XXXX XXXX\"\r\n                        value={form.tarjeta}\r\n                        onChange={handleFieldChange('tarjeta')}\r\n                        className={\r\n                          errors.tarjeta ? styles.inputError : undefined\r\n                        }\r\n                      />\r\n                      {errors.tarjeta && (\r\n                        <span className={styles.errorMessage}>\r\n                          {errors.tarjeta}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <div className={styles.fieldGroup}>\r\n                      <label htmlFor=\"expiracion\">Expiración</label>\r\n                      <input\r\n                        id=\"expiracion\"\r\n                        placeholder=\"MM/AA\"\r\n                        value={form.expiracion}\r\n                        onChange={handleFieldChange('expiracion')}\r\n                        className={\r\n                          errors.expiracion ? styles.inputError : undefined\r\n                        }\r\n                      />\r\n                      {errors.expiracion && (\r\n                        <span className={styles.errorMessage}>\r\n                          {errors.expiracion}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <div className={styles.fieldGroup}>\r\n                      <label htmlFor=\"cvv\">CVV</label>\r\n                      <input\r\n                        id=\"cvv\"\r\n                        inputMode=\"numeric\"\r\n                        placeholder=\"123\"\r\n                        value={form.cvv}\r\n                        onChange={handleFieldChange('cvv')}\r\n                        className={errors.cvv ? styles.inputError : undefined}\r\n                      />\r\n                      {errors.cvv && (\r\n                        <span className={styles.errorMessage}>\r\n                          {errors.cvv}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className={styles.transferInfo}>\r\n                    <p>\r\n                      Transferir a: <strong>Level-Up Gamer SpA</strong>\r\n                    </p>\r\n                    <p>Cuenta corriente Banco Level-Up 12-345-678-9</p>\r\n                    <p>\r\n                      Enviar comprobante a{' '}\r\n                      <a href=\"mailto:pagos@levelup.cl\">pagos@levelup.cl</a>\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </fieldset>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                className={styles.confirmButton}\r\n                disabled={cartEstaVacio}\r\n              >\r\n                Confirmar pedido\r\n              </button>\r\n            </form>\r\n          </section>\r\n\r\n          <aside className={styles.summary}>\r\n            <h2>Resumen</h2>\r\n            {items.length === 0 ? (\r\n              <p>\r\n                No hay productos. <Link to=\"/tienda\">Explorar tienda</Link>\r\n              </p>\r\n            ) : (\r\n              <div className={styles.summaryList}>\r\n                {items.map((item) => {\r\n                  const pricing = getItemPricing(item);\r\n                  return (\r\n                    <div key={item.id} className={styles.summaryRow}>\r\n                      <div>\r\n                        <p>{item.nombre}</p>\r\n                        <span>Cantidad: {item.cantidad}</span>\r\n                      </div>\r\n                      {pricing.hasDiscount ? (\r\n                        <span className={styles.priceWithDiscount}>\r\n                          <span className={styles.priceOriginal}>\r\n                            {formatPrice(pricing.subtotalBase)}\r\n                          </span>\r\n                          <strong className={styles.priceFinal}>\r\n                            {formatPrice(pricing.subtotalFinal)}\r\n                          </strong>\r\n                        </span>\r\n                      ) : (\r\n                        <strong className={styles.priceFinal}>\r\n                          {formatPrice(pricing.subtotalFinal)}\r\n                        </strong>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n                <div className={styles.summaryRow}>\r\n                  <span>Subtotal</span>\r\n                  <span\r\n                    className={\r\n                      hasDuocDiscount\r\n                        ? styles.priceOriginal\r\n                        : styles.priceFinal\r\n                    }\r\n                  >\r\n                    {formatPrice(subtotal)}\r\n                  </span>\r\n                </div>\r\n                {hasDuocDiscount && totalSavings > 0 && (\r\n                  <div className={styles.summaryRow}>\r\n                    <span>Descuento DUOC</span>\r\n                    <span className={styles.savingsAmount}>\r\n                      −{formatPrice(totalSavings)}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                <div className={styles.summaryRow}>\r\n                  <span>Envío</span>\r\n                  <strong>Por calcular</strong>\r\n                </div>\r\n                <div className={styles.totalRow}>\r\n                  <span>Total a pagar</span>\r\n                  <strong className={styles.priceFinal}>\r\n                    {formatPrice(total)}\r\n                  </strong>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </aside>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\Contacto.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\Home.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\Perfil.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\ProductoDetalle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\Registro.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\Tienda.tsx","messages":[{"ruleId":"prettier/prettier","severity":1,"message":"Replace `·src={producto.url}·alt={producto.nombre}·loading=\"lazy\"` with `␍⏎····················src={producto.url}␍⏎····················alt={producto.nombre}␍⏎····················loading=\"lazy\"␍⏎·················`","line":147,"column":23,"nodeType":null,"messageId":"replace","endLine":147,"endColumn":79,"fix":{"range":[5208,5264],"text":"\r\n                    src={producto.url}\r\n                    alt={producto.nombre}\r\n                    loading=\"lazy\"\r\n                 "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useMemo, useState } from 'react';\r\nimport { Link, useSearchParams } from 'react-router-dom';\r\nimport { useProducts } from '@/hooks/useProducts';\r\nimport type { ProductRecord } from '@/utils/products';\r\nimport { useCart } from '@/context/CartContext';\r\nimport { formatPrice } from '@/utils/format';\r\nimport { usePricing } from '@/hooks/usePricing';\r\nimport styles from './Tienda.module.css';\r\n\r\nconst SORT_OPTIONS = [\r\n  { value: 'populares', label: 'Más populares' },\r\n  { value: 'precio-asc', label: 'Precio: menor a mayor' },\r\n  { value: 'precio-desc', label: 'Precio: mayor a menor' },\r\n  { value: 'nuevo', label: 'Nuevos ingresos' },\r\n];\r\n\r\nconst ordenarProductos = (sort: string, items: ProductRecord[]) => {\r\n  switch (sort) {\r\n    case 'precio-asc':\r\n      return [...items].sort((a, b) => a.precio - b.precio);\r\n    case 'precio-desc':\r\n      return [...items].sort((a, b) => b.precio - a.precio);\r\n    case 'nuevo':\r\n      return [...items].sort((a, b) => b.codigo.localeCompare(a.codigo));\r\n    default:\r\n      return items;\r\n  }\r\n};\r\n\r\nconst Tienda: React.FC = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [activeSort, setActiveSort] = useState(\r\n    searchParams.get('orden') ?? 'populares'\r\n  );\r\n  const categoriaParam = searchParams.get('categoria') ?? undefined;\r\n  const productos = useProducts();\r\n  const { getPriceBreakdown, discountRate } = usePricing();\r\n  const categorias = useMemo(\r\n    () =>\r\n      Array.from(\r\n        new Set(\r\n          productos\r\n            .map((producto) => producto.categoria?.trim())\r\n            .filter(Boolean)\r\n        )\r\n      ).sort((a, b) => (a ?? '').localeCompare(b ?? '')) as string[],\r\n    [productos]\r\n  );\r\n  const { addItem } = useCart();\r\n\r\n  const productosFiltrados = useMemo(() => {\r\n    const base = categoriaParam\r\n      ? productos.filter(\r\n          (producto) =>\r\n            producto.categoria?.toLowerCase() === categoriaParam.toLowerCase()\r\n        )\r\n      : productos;\r\n    return ordenarProductos(activeSort, base);\r\n  }, [activeSort, categoriaParam, productos]);\r\n\r\n  const handleCategoriaClick = (categoria?: string) => {\r\n    const next = new URLSearchParams(searchParams);\r\n    if (categoria) {\r\n      next.set('categoria', categoria);\r\n    } else {\r\n      next.delete('categoria');\r\n    }\r\n    setSearchParams(next, { replace: true });\r\n  };\r\n\r\n  const handleSortChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const { value } = event.target;\r\n    setActiveSort(value);\r\n    const next = new URLSearchParams(searchParams);\r\n    next.set('orden', value);\r\n    setSearchParams(next, { replace: true });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className={styles.page}>\r\n        <header className={styles.header}>\r\n          <nav className={styles.breadcrumb} aria-label=\"breadcrumb\">\r\n            <Link to=\"/\">Inicio</Link>\r\n            <span>•</span>\r\n            <span>Tienda</span>\r\n          </nav>\r\n\r\n          <div className={styles.title}>\r\n            <h1>Tienda Level-Up</h1>\r\n            <span className={styles.badge}>\r\n              {productosFiltrados.length} productos\r\n            </span>\r\n          </div>\r\n\r\n          <div className={styles.controls}>\r\n            <div className={styles.filterGroup}>\r\n              <button\r\n                type=\"button\"\r\n                className={`${styles.filterButton} ${categoriaParam ? '' : styles.filterButtonActive}`}\r\n                onClick={() => handleCategoriaClick(undefined)}\r\n              >\r\n                Todos\r\n              </button>\r\n              {categorias.map((categoria) => (\r\n                <button\r\n                  key={categoria}\r\n                  type=\"button\"\r\n                  className={`${styles.filterButton} ${\r\n                    categoriaParam?.toLowerCase() === categoria.toLowerCase()\r\n                      ? styles.filterButtonActive\r\n                      : ''\r\n                  }`}\r\n                  onClick={() => handleCategoriaClick(categoria)}\r\n                >\r\n                  {categoria}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            <div className={styles.select}>\r\n              <label htmlFor=\"orden\" className=\"visually-hidden\">\r\n                Ordenar productos\r\n              </label>\r\n              <select id=\"orden\" value={activeSort} onChange={handleSortChange}>\r\n                {SORT_OPTIONS.map((option) => (\r\n                  <option key={option.value} value={option.value}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {productosFiltrados.length === 0 ? (\r\n          <div className={styles.emptyState}>\r\n            <h2>No encontramos productos</h2>\r\n            <p>Intenta cambiar los filtros o revisar otra categoría.</p>\r\n          </div>\r\n        ) : (\r\n          <div className={styles.grid}>\r\n            {productosFiltrados.map((producto) => {\r\n              const pricing = getPriceBreakdown(producto.precio);\r\n              return (\r\n                <article key={producto.codigo} className={styles.card}>\r\n                  <img src={producto.url} alt={producto.nombre} loading=\"lazy\" />\r\n                  <div className={styles.cardBody}>\r\n                    <h3 className={styles.productName}>{producto.nombre}</h3>\r\n                    <p className={styles.productDescription}>\r\n                      {producto.descripcion}\r\n                    </p>\r\n\r\n                    <div className={styles.priceSection}>\r\n                      {pricing.hasDiscount ? (\r\n                        <span className={styles.priceWithDiscount}>\r\n                          <span className={styles.priceOriginal}>\r\n                            {formatPrice(pricing.basePrice)}\r\n                          </span>\r\n                          <span className={styles.priceFinal}>\r\n                            {formatPrice(pricing.finalPrice)}\r\n                          </span>\r\n                          <span className={styles.discountBadge}>\r\n                            −{Math.round(discountRate * 100)}% DUOC\r\n                          </span>\r\n                        </span>\r\n                      ) : (\r\n                        <span className={styles.priceFinal}>\r\n                          {formatPrice(pricing.finalPrice)}\r\n                        </span>\r\n                      )}\r\n                      <Link\r\n                        to={`/tienda/${producto.codigo}`}\r\n                        className={styles.detailLink}\r\n                      >\r\n                        Ver detalle →\r\n                      </Link>\r\n                    </div>\r\n\r\n                    <button\r\n                      type=\"button\"\r\n                      className={styles.addButton}\r\n                      onClick={() => addItem(producto)}\r\n                    >\r\n                      Agregar al carrito\r\n                    </button>\r\n                  </div>\r\n                </article>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tienda;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\admin\\AdminLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\admin\\AdminSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\admin\\Categorias.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\admin\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\admin\\Mensajes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\admin\\Pedidos.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\admin\\Productos.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\pages\\admin\\Usuarios.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\routes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\routes\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\utils\\categories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\utils\\format.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\utils\\messages.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\utils\\orders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\patri\\Desktop\\LevelUp\\GitHub\\WebLevelUp\\app\\src\\utils\\products.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]